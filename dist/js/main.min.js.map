{"version":3,"sources":["main.js"],"names":["Site","mobileThreshold","scrollToSpeed","loadingDelay","init","_this","this","$","window","resize","onResize","document","ready","length","Portraits","Player","Paypal","SupportForm","slick","infinite","speed","slidesToShow","centerMode","variableWidth","dots","arrows","focusOnSelect","on","toggleClass","removeLoading","setTimeout","removeClass","fixWidows","each","string","html","replace","getHashVideoId","hash","location","split","styleForm","$form","$buy","find","$select","attr","wrap","prepend","remove","playerOptions","controls","modestbranding","rel","title","showinfo","fs","WP","wp_debug","isAdmin","$wrapper","$container","bind","setVideosList","list","event","data","youtubeIds","initYoutube","player","YT","playerVars","addEventListener","handleVideoReady","handleVideoStateChange","checkHash","console","log","fadeOut","nextVideo","fadeIn","addClass","openVideo","sizeIframe","closeVideo","closeIframe","stopVideo","scrollIn","scrollTo","playVideo","videoId","loadVideoById","currentVideo","indexOf","css","height","windowWidth","width","windowHeight","headerHeight","outerHeight","filterHeight","landscapeIframeHeight","portraitIframeHeight","hasClass","$filters","$grid","$portraits","initGrid","shuffle","Shuffle","itemSelector","sizer","filterMode","FilterMode","ALL","runs","update","layout","handleFilterChange","handleHashChange","handleArrangeComplete","Map","getFilteredYoutubeIds","toArray","map","val","dataset","youtubeId","trigger","filterArray","getFilterArray","filter","value","push","onYouTubePlayerAPIReady","options","mapTypeControl","fullscreenControl","streetViewControl","zoomControl","center","lat","lng","minZoom","maxZoom","icon","styles","elementType","stylers","color","visibility","weight","dataStyle","fillColor","strokeWeight","markers","geoJSONURL","themeUrl","url","scaledSize","google","maps","Size","anchor","Point","loadGeoJson","setStyle","bounds","LatLngBounds","locations","index","item","Marker","name","position","parseInt","slug","addListener","playPortraitsByLocation","extend","getPosition","setCenter","getCenter","addListenerOnce","setZoom","getZoom","fitBounds","bindToggleMap","limitBounds","zoomButtons","sLat","getBounds","getSouthWest","nLat","getNorthEast","setOptions","LatLng","mapCenter","preventDefault","wrapperOffsetTop","offset","top","mapLocation","element","firstVideoId","zoomChange","currentZoom","zoomLevel","submit","e","serializeArray","reduce","obj","submitForm","form","email","message","warnInvalid","unwarnInvalid","makeRequest","requestData","action","nonce","ajax","ajaxUrl","type","success","response","status","handleResponse","handleError","error","text"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, document, Site, YT, WP, google */\n\nSite = {\n  mobileThreshold: 601,\n  scrollToSpeed: 300,\n  loadingDelay: 1500, // milliseconds\n  init: function() {\n    var _this = this;\n\n    $(window).resize(function(){\n      _this.onResize();\n    });\n\n    $(document).ready(function () {\n\n      if ($('#portraits').length) {\n        // Init grid\n        Site.Portraits.init();\n        // Init player\n        Site.Player.init();\n      }\n\n      if ($('.paypal-form-holder').length) {\n        Site.Paypal.init();\n      }\n\n      if ($('#support-form').length) {\n        Site.SupportForm.init();\n      }\n\n      if ($('.slick-slide').length > 1) {\n        $('.slick-container').slick({\n          infinite: true,\n          speed: 300,\n          slidesToShow: 1,\n          centerMode: true,\n          variableWidth: true,\n          dots: true,\n          arrows: false,\n          focusOnSelect: true\n        });\n      }\n\n      $('.js-menu-toggle').on('click', function() {\n        $('#mobile-menu').toggleClass('open');\n      });\n\n    });\n\n  },\n\n  // Remove laoding class fro body after a certain time\n  removeLoading: function() {\n    var _this = this;\n\n    setTimeout( function() {\n      // Remove loading\n      $('body').removeClass('loading');\n    }, _this.loadingDelay);\n  },\n\n  onResize: function() {\n    var _this = this;\n\n  },\n\n  fixWidows: function() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function(){\n      var string = $(this).html();\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  },\n\n  getHashVideoId: function() {\n    // Get hash\n    var hash = location.hash.split('/');\n\n    // Check that its a portrait\n    if(hash[1] === 'portrait') {\n\n      // Get youtube ID\n      var videoId = hash[hash.length - 1];\n\n      return videoId;\n\n    }\n\n    return false;\n  },\n\n};\n\nSite.Paypal = {\n  init: function() {\n    var _this = this;\n\n    var $form = $('.paypal-form-holder form');\n\n    $form.each(function() {\n      _this.styleForm($(this));\n    });\n\n    $('.paypal-form-holder').removeClass('u-hidden');\n\n  },\n\n  styleForm: function($form) {\n    var $buy = $form.find('input[name=\"submit\"]');\n    var $select = $form.find('select');\n\n    // Style Buy button\n    $buy.attr('type', 'submit');\n    $buy.attr('value', 'Buy');\n    $buy.wrap('<div class=\"grid-item item-s-6\"></div>');\n\n    // Style select\n    if ($select.length) {\n      $form.prepend($select);\n      $form.find('table').remove();\n      $select.wrap('<div class=\"grid-item item-s-6\"></div>');\n    }\n  },\n\n};\n\nSite.Player = {\n  playerOptions: {\n    // https://developers.google.com/youtube/player_parameters?playerVersion=HTML5#Parameters\n    controls: 1,\n    modestbranding: 1,\n    rel: 0,\n    title: 0,\n    showinfo: 0,\n    fs: 0, // Fullscreen\n  },\n\n  init: function() {\n    var _this = this;\n\n    // Init youtube whuen youtube api is ready\n    // TODO: subscribe to this event with jQuery\n\n    // If WP_DEBUG turn on controls cuz happy Dev :)\n    if(WP.wp_debug === true && WP.isAdmin === true) {\n      _this.playerOptions.controls = 1;\n    }\n\n    // Get the player container element\n    _this.$wrapper = $('#player-container');\n\n    // Get the player container element\n    _this.$container = $('#portraits');\n\n    // Bind stuff\n    _this.bind();\n\n  },\n\n  setVideosList: function(list) {\n    var _this = this;\n\n    if(list) {\n      _this.list = list;\n    }\n\n  },\n\n  bind: function() {\n    var _this = this;\n\n    // Listen for updatedyoutubelist\n    $(window).on('updatedyoutubelist', function(event, data) {\n      // Update list cache\n      _this.setVideosList(data.youtubeIds);\n    });\n\n  },\n\n  initYoutube: function() {\n    var _this = this;\n\n    // Remove Loading\n    Site.removeLoading();\n\n    // Init youtube player inside #player-container\n    _this.player = new YT.Player('player-iframe', {\n      playerVars: _this.playerOptions,\n    });\n\n    $(window).resize(_this.onResize.bind(_this));\n\n\n    _this.player.addEventListener('onReady', _this.handleVideoReady.bind(this));\n    _this.player.addEventListener('onStateChange', _this.handleVideoStateChange.bind(this));\n\n    $(window).resize(_this.onResize.bind(_this));\n\n  },\n\n  handleVideoReady: function(event) {\n    Site.Portraits.checkHash();\n  },\n\n  handleVideoStateChange: function(event) {\n    var _this = this;\n\n    console.log('state change');\n\n    switch(event.data) {\n      case -1: // Unstarted\n        _this.fadeOut();\n        console.log('Unstarted');\n        break;\n      case 0: // Ended\n        _this.fadeOut();\n        console.log('Ended 0');\n        if(_this.list) {\n          console.log('Next');\n          _this.nextVideo();\n        }\n        break;\n      case 1: // Playing\n        console.log('Playing');\n        _this.fadeIn();\n        break;\n      case 3: // Video ended\n        _this.fadeOut();\n        console.log('Video ended 3');\n        break;\n      // Check if there's list\n    }\n  },\n\n  fadeOut: function() {\n    var _this = this;\n\n    _this.$container.removeClass('show');\n  },\n\n  fadeIn: function() {\n    var _this = this;\n\n    _this.$container.addClass('show');\n  },\n\n  openVideo: function() {\n    var _this = this;\n\n    _this.$container.addClass('video');\n\n    _this.sizeIframe();\n  },\n\n  closeVideo: function() {\n    var _this = this;\n\n    _this.$container.removeClass('video');\n    _this.closeIframe();\n    _this.player.stopVideo();\n\n    location.hash = '';\n\n  },\n\n  scrollIn: function() {\n    var _this = this;\n\n    // Scroll to top\n    $('body').scrollTo(0, Site.scrollToSpeed);\n  },\n\n  playVideo: function(videoId, list) {\n    var _this = this;\n\n    _this.openVideo();\n\n    // Play video\n    _this.player.loadVideoById(videoId);\n\n\n    // If passed, update list\n    if(typeof list !== 'undefined') {\n      _this.setVideosList(list);\n    }\n\n  },\n\n  nextVideo: function() {\n    var _this = this;\n\n    // Get current video ID\n    var currentVideo = Site.getHashVideoId();\n    currentVideo = _this.list.indexOf(currentVideo);\n\n    // Check if theres more videos to play\n    if (_this.list.length > currentVideo + 1) {\n\n      // Get next video ID\n      var nextVideo = _this.list[currentVideo + 1];\n\n      // Play next video\n      location.hash = '#!/portrait/' + nextVideo;\n    } else {\n      _this.closeVideo();\n    }\n  },\n\n  closeIframe: function() {\n    var _this = this;\n\n    $('#player-wrapper').css({\n      'height': 0\n    });\n  },\n\n  sizeIframe: function() {\n    var _this = this;\n\n    var windowWidth = $(window).width();\n    var windowHeight = $(window).height();\n    var headerHeight = $('#header').outerHeight();\n    var filterHeight = $('#portraits-filters-container').outerHeight();\n\n    var landscapeIframeHeight = windowHeight - (headerHeight + filterHeight);\n    var portraitIframeHeight = (windowWidth / 16) * 9;\n\n    if (_this.$container.hasClass('video')) {\n      if (windowWidth <= (windowHeight / 9 * 16) && portraitIframeHeight <= landscapeIframeHeight) {\n        // Portrait\n\n        $('#player-wrapper').css({\n          'height': portraitIframeHeight\n        });\n\n        $('#player-iframe').css({\n          'width': '100%'\n        });\n\n      } else {\n        // Landscape\n\n        $('#player-wrapper').css({\n          'height': landscapeIframeHeight\n        });\n\n        $('#player-iframe').css({\n          'width': (landscapeIframeHeight / 9) * 16\n        });\n      }\n    }\n  },\n\n  onResize: function() {\n    var _this = this;\n\n    _this.sizeIframe();\n  },\n\n};\n\nSite.Portraits = {\n  init: function() {\n    var _this = this;\n\n    // Get filters form element\n    _this.$form = $('#portraits-filters');\n\n    // Get filters select elements\n    _this.$filters = _this.$form.find('select');\n\n    // Get grid element\n    _this.$grid = $('#portraits-grid');\n\n    // Get portraits\n    _this.$portraits = _this.$grid.find('.portrait');\n\n    // Init grid\n    _this.initGrid();\n\n    // Bind stuff\n    _this.bind();\n\n  },\n\n  initGrid: function() {\n    var _this = this;\n\n    _this.$grid.shuffle = new window.Shuffle(_this.$grid, {\n      itemSelector: '.portrait',\n      sizer: '#portrait-sizer',\n      filterMode: window.Shuffle.FilterMode.ALL,\n    });\n\n    // Workaround to make it compatible with lazysizes\n    _this.$grid[0].addEventListener('load', (function(){\n      var runs;\n      var update = function(){\n        _this.$grid.shuffle.layout();\n        runs = false;\n      };\n      return function(){\n        if(!runs){\n          runs = true;\n          setTimeout(update, 33);\n        }\n      };\n    }()), true);\n  },\n\n  bind: function() {\n    var _this = this;\n\n    // Bind select filters change\n    _this.$filters = $('.filter-select').on('change', _this.handleFilterChange.bind(_this));\n\n    // Bind hash change aka clicking on a portrait\n    $(window).on('hashchange', _this.handleHashChange.bind(_this));\n\n    // Bind arrange complete grid event\n    _this.$grid.on('arrangeComplete',_this.handleArrangeComplete.bind(_this));\n\n    // Bind scroll to top on portrait click\n    $('.portrait a').on('click', Site.Player.scrollIn);\n  },\n\n  checkHash: function() {\n    var _this = this;\n\n    var videoId = Site.getHashVideoId();\n\n    if(videoId) {\n      if (Site.Map.$wrapper.hasClass('show-map')) {\n        Site.Player.playVideo(videoId);\n      } else {\n        var list = _this.getFilteredYoutubeIds();\n\n        Site.Player.playVideo(videoId, list);\n      }\n    }\n  },\n\n  handleHashChange: function(event) {\n    var _this = this;\n\n    _this.checkHash();\n\n  },\n\n  // Get a list of youtube ids (filtered in the list)\n  getFilteredYoutubeIds: function() {\n    var _this = this;\n\n    // Get the filtered elements\n    var filteredElements = $('.shuffle-item--visible').toArray();\n\n    // Get youtubeIds\n    var youtubeIds = filteredElements.map( function(val) {\n      return val.dataset.youtubeId;\n    });\n\n    return youtubeIds;\n  },\n\n  handleArrangeComplete: function(event) {\n    var _this = this;\n\n    var youtubeIds = _this.getFilteredYoutubeIds();\n\n    // Trigger an event with the list of youtube Ids\n    $(window).trigger('updatedyoutubelist', {\n      youtubeIds: youtubeIds,\n    });\n\n  },\n\n  handleFilterChange: function(event) {\n    var _this = this;\n\n    // Get the selector text to be used for filtering\n    var filterArray = _this.getFilterArray();\n\n    _this.$grid.shuffle.filter(filterArray);\n  },\n\n  // Return an array of filters\n  // Eg. [\"subject-ants\"]\n  //     [\"subject-ants\", \"location-pants\"]\n  getFilterArray: function() {\n    var _this = this;\n\n    var filterArray = [];\n\n    // Iterate thru the filters to get it's values\n    _this.$filters.each( function() {\n      if(this.value) {\n\n        // Build up selector string\n        filterArray.push(this.dataset.filter + '-' + this.value);\n      }\n    });\n\n    return filterArray;\n  },\n\n};\n\n// Declared ASAP\nwindow.onYouTubePlayerAPIReady = Site.Player.initYoutube.bind(Site.Player);\n\nSite.Map = {\n  options: {\n    mapTypeControl: false,\n    fullscreenControl: false,\n    streetViewControl: false,\n    zoomControl: false,\n    // TODO: Set coordinates\n    center: {\n      lat: -34.397,\n      lng: 150.644\n    },\n    minZoom: 2,\n    maxZoom: 15,\n    icon: {\n      // requires Maps API and set on init()\n    },\n    styles: [\n      {\n        \"elementType\": \"geometry.fill\",\n        \"stylers\": [\n          {\n            \"color\": \"#ffffff\"\n          },\n          {\n            \"visibility\": \"on\"\n          }\n        ]\n      },\n      {\n        \"elementType\": \"geometry.stroke\",\n        \"stylers\": [\n          {\n            \"color\": \"#000000\"\n          },\n          {\n            \"visibility\": \"on\"\n          },\n          {\n            \"weight\": 0.5\n          }\n        ]\n      },\n      {\n        \"elementType\": \"labels.text.fill\",\n        \"stylers\": [\n          {\n            \"color\": \"#000000\"\n          }\n        ]\n      },\n      {\n        \"elementType\": \"labels.text.stroke\",\n        \"stylers\": [\n          {\n            \"visibility\": \"off\"\n          }\n        ]\n      }\n    ],\n  },\n  dataStyle: {\n    fillColor: 'white',\n    strokeWeight: 1\n  },\n  markers: [],\n  geoJSONURL: WP.themeUrl + '/dist/static/countries.geo.json',\n\n  init: function() {\n    var _this = this;\n\n    // Setup options that depend on Maps API library\n    _this.options.icon = {\n      url: WP.themeUrl + '/dist/img/truth-bubble.png',\n      scaledSize: new google.maps.Size(75.5,55),\n      anchor: new google.maps.Point(0,55)\n    };\n\n    // Get grid element\n    // TODO: find a way of not repeating this data here and in Site.Portraits\n    _this.$grid = $('#portraits-grid');\n\n    // Get portraits\n    // TODO: find a way of not repeating this data here and in Site.Portraits\n    _this.$portraits = _this.$grid.find('.portrait');\n\n    // Get shared wrapper\n    _this.$wrapper = $('#map-portraits-wrapper');\n\n    // Get map container\n    _this.$container = $('#map-container');\n\n    // Init google maps\n    _this.map = new google.maps.Map(_this.$container[0], _this.options);\n\n    // Load GeoJSON with countries' borders\n    _this.map.data.loadGeoJson(_this.geoJSONURL);\n\n    // Set the stroke width, and fill color for each polygon\n    _this.map.data.setStyle(_this.dataStyle);\n\n    // Init a bounds object\n    var bounds = new google.maps.LatLngBounds();\n\n    // Get values for view toggle scrollTo\n    _this.headerHeight = $('#header').outerHeight(true);\n\n    $(window).resize(_this.onResize.bind(_this));\n\n    // Add a marker for each location\n    if (WP.locations.length) {\n      $(WP.locations).each(function(index, item) {\n\n        // Add marker\n        _this.markers[index] = new google.maps.Marker({\n          map: _this.map,\n          title: item.name,\n          icon: _this.options.icon,\n          position: {\n            lat: parseInt(item.lat),\n            lng: parseInt(item.lng),\n          }\n        });\n\n        if(WP.wp_debug === true && WP.isAdmin === true) {\n          // Add marker\n          _this.markers[index] = new google.maps.Marker({\n            map: _this.map,\n            title: item.name,\n            position: {\n              lat: parseInt(item.lat),\n              lng: parseInt(item.lng),\n            }\n          });\n        }\n\n        // Add slug to the marker\n        _this.markers[index].slug = item.slug;\n\n        // Add click listener\n        _this.markers[index].addListener('click', function() {\n          _this.playPortraitsByLocation(this.slug);\n        });\n\n        // Add item location to the bounds list\n        bounds.extend(_this.markers[index].getPosition());\n\n      });\n\n      // Make map fit all locations\n\n      //center the map to the geometric center of all markers\n      _this.map.setCenter(bounds.getCenter());\n\n      // Listen for bounds change (only once)\n      google.maps.event.addListenerOnce(_this.map, 'bounds_changed', function(event) {\n        //remove one zoom level to ensure no marker is on the edge.\n        _this.map.setZoom(_this.map.getZoom()-1);\n\n        // set a minimum zoom\n        // if you got only 1 marker or all markers are too close to each other map will be zoomed too much.\n        if (_this.map.getZoom() > 13) {\n          _this.map.setZoom(4);\n        }\n\n      }.bind(this));\n\n      _this.map.fitBounds(bounds);\n\n    }\n\n    _this.bindToggleMap();\n\n    _this.limitBounds();\n\n    _this.zoomButtons();\n  },\n\n  // prevent map dragging into North/South grey areas\n  limitBounds: function() {\n    var _this = this;\n\n    google.maps.event.addListener(_this.map, 'drag', function() {\n      var sLat = _this.map.getBounds().getSouthWest().lat();\n      var nLat = _this.map.getBounds().getNorthEast().lat();\n\n      if (sLat < -85 || nLat > 85) {\n        // map out of bounds\n        // relcenter map within bounds\n        _this.map.setOptions({\n          center: new google.maps.LatLng(\n            _this.mapCenter.lat(), // set Latitude for center of map here\n            _this.mapCenter.lng() // set Langitude for center of map here\n          )\n        });\n      } else {\n        // map within bounds\n        // save map center\n        _this.mapCenter = _this.map.getCenter();\n      }\n    });\n\n  },\n\n  bindToggleMap: function() {\n    var _this = this;\n\n    $('.toggle-map').on('click', function(event) {\n      event.preventDefault();\n      // Toggle map class\n      _this.$wrapper.toggleClass('show-map');\n\n      var wrapperOffsetTop = _this.$wrapper.offset().top;\n\n      // Scroll to where portraits or map is\n      $('body').scrollTo(wrapperOffsetTop - _this.headerHeight, Site.scrollToSpeed);\n    });\n  },\n\n  // Play portraits by location\n  playPortraitsByLocation: function(mapLocation) {\n    var _this = this;\n\n    // Empty list for youtube IDs\n    var list = [];\n\n    // Filter selector string\n    var filter = '[data-groups*=\"location-' + mapLocation + '\"]';\n\n    // Filter portraits\n    var $filteredPortraits = _this.$portraits.filter(filter);\n\n    // Save youtube IDs\n    $filteredPortraits.each(function(index, element) {\n      list[index] = element.dataset.youtubeId;\n    });\n\n    // Play first video, update the list\n    // Site.Player.playVideo(list[0], list);\n\n    var firstVideoId = list[0];\n\n    debugger;\n\n    // Play next video\n    location.hash = '#!/portrait/' + firstVideoId;\n\n    // If passed, update list\n    if(typeof list !== 'undefined') {\n      Site.Player.setVideosList(list);\n    }\n\n    // Scroll to top\n    $('body').scrollTo(0, Site.scrollToSpeed);\n\n  },\n\n  zoomButtons: function() {\n    var _this = this;\n\n    $('.map-zoom-button').on('click', function() {\n      var zoomChange = parseInt($(this).attr('data-zoom'));\n      var currentZoom = _this.map.getZoom();\n\n      _this.map.setZoom(currentZoom + zoomChange);\n    });\n\n    google.maps.event.addListener(_this.map, 'zoom_changed', function(){\n      var zoomLevel = _this.map.getZoom();\n\n      if (zoomLevel <= _this.options.minZoom) {\n        $('.map-zoom-button[data-zoom=\"-1\"]').addClass('disabled');\n      } else {\n        $('.map-zoom-button[data-zoom=\"-1\"]').removeClass('disabled');\n      }\n\n      if (zoomLevel >= _this.options.maxZoom) {\n        $('.map-zoom-button[data-zoom=\"1\"]').addClass('disabled');\n      } else {\n        $('.map-zoom-button[data-zoom=\"1\"]').removeClass('disabled');\n      }\n    });\n  },\n\n  onResize: function() {\n    var _this = this;\n\n    // Refresh values for view toggle scrollTo\n    _this.headerHeight = $('#header').outerHeight(true);\n  }\n};\n\nSite.SupportForm = {\n  init: function() {\n    var _this = this;\n\n    _this.$form = $('#support-form');\n\n    if (_this.$form.length) {\n      _this.bind();\n    }\n\n  },\n\n  bind: function() {\n    var _this = this;\n\n    _this.$form.on({\n      'submit': function(e) {\n        e.preventDefault();\n\n        var data = $(this).serializeArray().reduce(function(obj, item) {\n          obj[item.name] = item.value;\n          return obj;\n        }, {});\n\n        _this.submitForm(this, data);\n\n      }\n    })\n  },\n\n  submitForm: function(form, data) {\n    var _this = this;\n\n    // validate and notify\n    if (data.email === '' || data.message === '') {\n      _this.warnInvalid(form);\n    } else {\n      _this.unwarnInvalid(form);\n      _this.makeRequest(data, form);\n      $('#support-submit').attr('disabled', 'disabled');\n    }\n  },\n\n  warnInvalid: function(form) {\n    $(form).addClass('invalid');\n  },\n\n  unwarnInvalid: function(form) {\n    $(form).removeClass('invalid');\n  },\n\n  makeRequest: function(data, form) {\n    var _this = this;\n    var requestData = {\n      'action': 'send_enquiry',\n      'nonce': data.nonce,\n      'data': data\n    };\n\n    $.ajax({\n      url: WP.ajaxUrl,\n      type: 'post',\n      data: requestData,\n      success: function(response, status) {\n        _this.handleResponse(response, status, form);\n      }\n    });\n  },\n\n  handleResponse: function(response, status, form) {\n    var _this = this;\n\n    if (response.type === 'error') {\n      _this.handleError(response.error, form);\n    } else if (response.type === 'success') {\n      $(form).addClass('thanks');\n      $('#support-form-email').val('');\n    }\n\n    $('#support-submit').attr('disabled', false);\n\n  },\n\n  handleError: function(error, form) {\n    var _this = this;\n\n    console.log('Error!', error);\n\n    $(form).addClass('error');\n    $('#support-messages .message-error').text(error.message);\n  },\n};\n\nSite.init();\n"]}