{"version":3,"sources":["main.js"],"names":["Site","mobileThreshold","init","_this","this","$","window","resize","onResize","document","ready","Swiper","pagination","loop","slidesPerView","loopedSlides","spaceBetween","paginationClickable","centeredSlides","slideToClickedSlide","length","Portraits","Paypal","fixWidows","each","string","html","replace","styleForm","removeClass","styleBuy","$buy","$form","find","$select","attr","wrap","prepend","remove","$filters","initGrid","on","handleFilterChange","bind","$grid","isotope","itemSelector","layoutMode","addEventListener","runs","update","setTimeout","event","filterSelector","getFilterSelector","filter","selector","index","value","dataset"],"mappings":"AAGAA,MACEC,gBAAiB,IACjBC,KAAM,WACJ,GAAIC,OAAQC,IAEZC,GAAEC,QAAQC,OAAO,WACfJ,MAAMK,aAGRH,EAAEI,UAAUC,MAAM,WAED,GAAIC,QAAQ,qBAEzBC,WAAY,qBACZC,MAAM,EACNC,cAAe,OACfC,aAAc,EACdC,aAAc,EACdC,qBAAqB,EACrBC,gBAAgB,EAChBC,qBAAqB,GAInBd,GAAE,cAAce,QAClBpB,KAAKqB,UAAUnB,OAGbG,EAAE,uBAAuBe,QAC3BpB,KAAKsB,OAAOpB,UAOlBM,SAAU,aAKVe,UAAW,WAETlB,EAAE,kBAAkBmB,KAAK,WACvB,GAAIC,QAASpB,EAAED,MAAMsB,MACrBD,QAASA,OAAOE,QAAQ,YAAY,YACpCtB,EAAED,MAAMsB,KAAKD,YAKnBzB,KAAKsB,QACHpB,KAAM,WACJ,GAAIC,OAAQC,IAEAC,GAAE,4BAERmB,KAAK,WACTrB,MAAMyB,UAAUvB,EAAED,SAGpBC,EAAE,uBAAuBwB,YAAY,aAIvCC,SAAU,SAASC,QAInBH,UAAW,SAASI,OAClB,GAAID,MAAOC,MAAMC,KAAK,wBAClBC,QAAUF,MAAMC,KAAK,SAGzBF,MAAKI,KAAK,OAAQ,UAClBJ,KAAKI,KAAK,QAAS,OACnBJ,KAAKK,KAAK,0CAGNF,QAAQd,SACVY,MAAMK,QAAQH,SACdF,MAAMC,KAAK,SAASK,SACpBJ,QAAQE,KAAK,6CAMnBpC,KAAKqB,WACHnB,KAAM,WACJ,GAAIC,OAAQC,IAGZD,OAAM6B,MAAQ3B,EAAE,sBAGhBF,MAAMoC,SAAWpC,MAAM6B,MAAMC,KAAK,UAGlC9B,MAAMqC,WAGNrC,MAAMoC,SAAWlC,EAAE,kBAAkBoC,GAAG,SAAUtC,MAAMuC,mBAAmBC,KAAKxC,SAIlFqC,SAAU,WACR,GAAIrC,OAAQC,IAGZD,OAAMyC,MAAQvC,EAAE,mBAAmBwC,SAEjCC,aAAc,aACdC,WAAY,YAId5C,MAAMyC,MAAM,GAAGI,iBAAiB,OAAS,WACvC,GAAIC,MACAC,OAAS,WACX/C,MAAMyC,MAAMC,QAAQ,UACpBI,MAAO,EAET,OAAO,YACDA,OACFA,MAAO,EACPE,WAAWD,OAAQ,UAGnB,IAIRR,mBAAoB,SAASU,OAC3B,GAAIjD,OAAQC,KAGRiD,eAAiBlD,MAAMmD,mBAG3BnD,OAAMyC,MAAMC,SACVU,OAAQF,kBAOZC,kBAAmB,WACjB,GAAInD,OAAQC,KAERoD,SAAW,EAWf,OARArD,OAAMoC,SAASf,KAAM,SAASiC,OACzBrD,KAAKsD,QAGNF,UAAY,kBAAoBpD,KAAKuD,QAAQJ,OAAS,IAAMnD,KAAKsD,MAAQ,OAItEF,WAKXxD,KAAKE","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, jQuery, document, Site, Modernizr */\n\nSite = {\n  mobileThreshold: 601,\n  init: function() {\n    var _this = this;\n\n    $(window).resize(function(){\n      _this.onResize();\n    });\n\n    $(document).ready(function () {\n\n      var mySwiper = new Swiper ('.swiper-container', {\n        // Optional parameters\n        pagination: '.swiper-pagination',\n        loop: true,\n        slidesPerView: 'auto',\n        loopedSlides: 5,\n        spaceBetween: 0,\n        paginationClickable: true,\n        centeredSlides: true,\n        slideToClickedSlide: true,\n      });\n\n      // Init grid\n      if ($('#portraits').length) {\n        Site.Portraits.init();\n      }\n\n      if ($('.paypal-form-holder').length) {\n        Site.Paypal.init();\n      }\n\n    });\n\n  },\n\n  onResize: function() {\n    var _this = this;\n\n  },\n\n  fixWidows: function() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function(){\n      var string = $(this).html();\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  },\n};\n\nSite.Paypal = {\n  init: function() {\n    var _this = this;\n\n    var $form = $('.paypal-form-holder form');\n\n    $form.each(function() {\n      _this.styleForm($(this));\n    });\n\n    $('.paypal-form-holder').removeClass('u-hidden');\n\n  },\n\n  styleBuy: function($buy) {\n\n  },\n\n  styleForm: function($form) {\n    var $buy = $form.find('input[name=\"submit\"]');\n    var $select = $form.find('select');\n\n    // Style Buy button\n    $buy.attr('type', 'submit');\n    $buy.attr('value', 'Buy');\n    $buy.wrap('<div class=\"grid-item item-s-6\"></div>');\n\n    // Style select\n    if ($select.length) {\n      $form.prepend($select);\n      $form.find('table').remove();\n      $select.wrap('<div class=\"grid-item item-s-6\"></div>');\n    }\n  },\n\n};\n\nSite.Portraits = {\n  init: function() {\n    var _this = this;\n\n    // Get filters form element\n    _this.$form = $('#portraits-filters');\n\n    // Get filters select elements\n    _this.$filters = _this.$form.find('select');\n\n    // Init grid\n    _this.initGrid();\n\n    // Bind select filters\n    _this.$filters = $('.filter-select').on('change', _this.handleFilterChange.bind(_this));\n\n  },\n\n  initGrid: function() {\n    var _this = this;\n\n    // Set grid with isotope\n    _this.$grid = $('#portraits-grid').isotope({\n      // options\n      itemSelector: '.grid-item',\n      layoutMode: 'fitRows'\n    });\n\n    // Workaround to make it compatible with lazysizes\n    _this.$grid[0].addEventListener('load', (function(){\n      var runs;\n      var update = function(){\n        _this.$grid.isotope('layout');\n        runs = false;\n      };\n      return function(){\n        if(!runs){\n          runs = true;\n          setTimeout(update, 33);\n        }\n      };\n    }()), true);\n\n  },\n\n  handleFilterChange: function(event) {\n    var _this = this;\n\n    // Get the selector text to be used for filtering\n    var filterSelector = _this.getFilterSelector();\n\n    // Filter using the selector on Isotope\n    _this.$grid.isotope({\n      filter: filterSelector,\n    });\n  },\n\n  // Return a string selector based on the filter values\n  // Eg. '[data-filters*=age-20]'\n  //     '[data-filters*=age-20][data-filters*=subject-subject-1]'\n  getFilterSelector: function() {\n    var _this = this;\n\n    var selector = '';\n\n    // Iterate thru the filters to get it's values\n    _this.$filters.each( function(index) {\n      if(this.value) {\n\n        // Build up selector string\n        selector += '[data-filters*=' + this.dataset.filter + '-' + this.value + ']';\n      }\n    });\n\n    return selector\n  },\n\n};\n\nSite.init();\n"]}